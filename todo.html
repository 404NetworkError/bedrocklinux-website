<!doctype html>
<!-- boilerplate -->
<html lang=en>
	<meta charset=utf-8>
	<title>Bedrock Linux: TODO</title>
	<link rel=stylesheet href=bedrock.css>
	<body>

		<!-- header -->

		<div id=header>
			<!-- logo -->
			<a id=logo href="index.html">
				<div id=logoshrinkwrap>
<pre>__          __             __      
\ \_________\ \____________\ \___  
 \  _ \  _\ _  \  _\ __ \ __\   /  
  \___/\__/\__/ \_\ \___/\__/\_\_\ </pre>
				</div>
			</a>

			<!-- navbock -->
			<!-- content is 3 lines high, top line is three wide -->
			<ul id=navvert>
				<li>
					<ul id=navhoriz>
						<li>
							<a href="introduction.html">Introduction</a>
						</li>
						<li>
							<a href="faq.html">FAQ</a>
						<li>
						<li>
							<a href="todo.html">TODO</a>
						<li>
					</ul>
				</li>
				<li>
					<a href="http://webchat.freenode.net/?channels=bedrock">IRC: #bedrock on freenode</a>
				</li>
				<li>
					<a href="1.0alpha1">Current Release (1.0alpha1)</a>
				</li>
			</ul>
		</div>

		<!-- main content -->

		<div id=main>
			<h1>TODO items for Bedrock Linux</h1>
			<h2>Open TODO</h2>
			<ul>
				<li>
				<strong>Known Issue</strong>: /etc/ file sync issue.
				<ul>
					<li>
					This is caused by the inability to rename/move over a mounted file.
					</li>
					<li>
						<em>Possible Solution</em>: This problem is
						particularly troubling when packages try to add users
						or groups to shared /etc/passwd and /etc/group.
						Perhaps we could just ensure that the users/groups are
						already there, so there is no need to add them.  This
						would require building a database of all possible
						users/groups that could be added by any package in any
						distro.
					</li>
					<li>
						<em>Possible Solution</em>: Look into unionfs-fuse as possible solution.
					</li>
				</ul>
				</li>
				<li>
				<strong>Known Issue</strong>: difficulty compiling static
				busybox and capchroot, depending on installer host.
				<ul>
					<li>
					This is caused by conscious limitations placed in
					libraries available in many Linux distributions,
					particularly glibc.
					</li>
					<li>
					<em>Possible Solution</em>: Use uclibc to build busybox
					and capchroot.  The downside is that this requires
					significantly more work for distros which do not have
					uclibc readily accessible.  Look into buildroot.
					</li>
				</ul>
				</li>
				<li>
				Document how to add Bedrock Linux to existing GRUB and GRUB2
				</li>
				<li>
				Repackage almost all of the system as a .tar.  The only things
				the user should have to add are the things that need to be
				compiled and changes to config files.
				</li>
				<li>
				Create/include tab completion for brc for zsh and bash.
				<ul>
					<li>
					Prototype of zsh is done.  Figure out how to make this
					available in clients transparently.
					</li>
				</ul>
				</li>
				<li>
				Include /etc/issue and possibly /etc/bedrock-release
				/etc/os-release /etc-lsb-release
				</li>
				</li>
				<li>
				Feature Request: on-demand initscript loading.
				</li>
				<li>
				Either make brs/brc hardcode /bin/mount or dictate that
				busybox does not prefer its own apps
				</li>
				<li>
				Create command to toggle BRPATH on/off
				</li>
				<li>
				Include instructions for adding client aliases to shells, or
				just put this in /etc/profile by default.
				</li>
				<li>
				Get a proper domain.
				</li>
				<li>
				Make sudo play properly with BRPATH.
				</li>
				<li>
				Create a package manager manager.
				<ul>
					<li>
					Possible names: "bpm", "pmm", "mom", "umm"
					</li>
				</ul>
				</li>
				<li>
				Make man pages work transparently across clients.
				</li>
				<li>
				statoverride issues in apt/dpkg clients
				</li>
				<li>
				Find standard used for TIMEZONE
				</li>
				<li>
					Create minimal system to bootstrap debootstrap
				</li>
				<li>
					Figure out how to simply use a kernel from existing distros
					instead of compiling every install/update
				</li>
				<li>
					Figure out what causes "GPGME error: invalid crypto engine" so
					that we can do Arch client setup with proper signature
					verification
				</li>
				<li>
					Script to assist installation
				</li>
				<li>
					Create VM image to demo
				</li>
				<li>
					Contact pacman devs, bug reporting failure to abort if
					addgroup fails?
				</li>
				<li>
					Investigate using cgroups to allow multiple inits.  This
					could be hugely beneficial.  Requested by
					http://linux.slashdot.org/comments.pl?sid=3027333&threshold=-1&commentsort=0&mode=nested&cid=40886637
				</li>
			</ul>
			<h2>Completed TODO</h2>
			<h3>1.0alpha2</h3>
			<ul>
				<li>
					Add system requirements to FAQ
				</li>
				<li>
				<strong>Known Issue</strong>:  AUTO_BRS=1 and DEVICE_MANAGER=udev
				lead to harmless warnings on boot.  Fix.
				<ul>
					<li>
						<strong>Done</strong>
					</li>
				</ul>
				</li>
				<li>
				Add caching to brw.
				<ul>
					<li>
						<strong>Done</strong>
					</li>
				</ul>
				<li>
					Document everything in HTML.
					<li>
						<strong>Done</strong>
					</li>
				</li>
			</ul>
			<h3>1.0alpha1 and prior</h3>
			<ul>
				<li>
				Play with capchroot, see if that is sufficient to replace schroot.
				<ul>
					<li>
					<strong>Done</strong>.  It is sufficient.
					</li>
				</ul>
				</li>
				<li>
				Figure out how to compile (statically) all of the pieces.
				<ul>
					<li>
						Linux Kernel
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Syslinux
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Busybox
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					<li>
					Fsck
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Schroot
					<ul>
						<li>
						<pre class="cmd">cp configure{,~} && sed -i -e 's,^\(#include <boost/regex.hpp>\),//\1,' -e 's,^\(boost::regex\),//\1,' configure && LDFLAGS="-static" ./configure --disable-block-device --disable-btrfs-snapshot --disable-csbuild --disable-dchroot --disable-dchroot-dsa --disable-debug --disable-dependency-tracking --disable-dependency-tracking --disable-doxygen --disable-loopback --disable-lvm-snapshot --disable-pam --disable-rpath --disable-shared --enable-static --prefix=/opt/schroot/ LDFLAGS="-static" && make clean && LDFLAGS="-all-static" make LDFLAGS="-all-static" && ldd bin/schroot/schroot</pre>
						</li>
						<li>
						<a href="http://lists.alioth.debian.org/pipermail/buildd-tools-devel/2011-October/007121.html">Contacted schroot dev.  Does not look good.</a>
						</li>
						<li>
						<strong>Abandoned</strong>.  Will look for alternative.  Possibly capchroot?
						</li>
					</ul>
					</li>
				</ul>
				</li>
				<li>
				Boot/shutdown scripts
				<ul>
					<li>
					Figure out what needs to be done at boot.
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Mount /proc
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Mount /sys
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Mount /dev
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Mount swap
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Fsck
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Make root rw
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Clean /tmp
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Set clock
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Seed PRNG
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Manage /dev
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Client init scripts
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					/etc/rc.local
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Kill all running processes
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Unmount filesystems
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
				</ul>
				</li>
				<li>
				Filesystem layout
				<ul>
					<li>
					<strong>Done</strong>.
					</li>
				</ul>
				</li>
				<li>
				Configuration files
				<ul>
					<li>
					rc.conf
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					brclients.conf
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					capchroot allow config
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					/etc/profile
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					/etc/fstab
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
				</ul>
				</li>
				<li>
				Scripts
				<ul>
					<li>
					Chroot wrapper (brc)
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					PATH hashing (brp)
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Run-in-all-chroots (brl)
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
					<li>
					Update (bru)
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					Metashell (brsh)
					<ul>
						<li>
						<strong>Done</strong>.
						</li>
					</ul>
					</li>
				</ul>
				</li>
				<li>
				Early documentation
				<ul>
					<li>
					<strong>Done</strong>.
					</li>
				</ul>
				</li>
				<li>
				Presentation slides
				<ul>
					<li>
					<strong>Done</strong>.
					</li>
				</ul>
				</li>
				<li>
				Research how to make packages accessible from other Linux distributions
				<ul>
					<li>
					<strong>Done</strong>.
					</li>
				</ul>
				</li>
				<li>
				Research how to make packages accessible from other Linux distributions transparently.
				<ul>
					<li>
					<strong>Done</strong>.
					</li>
				</ul>
				</li>
			</ul>
		</div>

		<!-- footer -->

		<div id=footer>
			<ul>
				<li>
					<a href="index.html">Home</a>
				</li>
				<li>
					<a href="introduction.html">Introduction</a>
				</li>
				<li>
					<a href="faq.html">FAQ</a>
				</li>
				<li>
					<a href="todo.html">TODO</a>
				</li>
				<li>
					<a href="http://webchat.freenode.net/?channels=bedrock">IRC: #bedrock on freenode</a>
				</li>
			</ul>
		</div>
	</body>
</html>
